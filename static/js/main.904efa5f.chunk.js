(this["webpackJsonpdreamhead-test"]=this["webpackJsonpdreamhead-test"]||[]).push([[0],{41:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(15),r=a.n(s),i=(a(41),a(4)),o=a(11),l=a(31),u=a.n(l),d=null!==localStorage.getItem("token")?localStorage.getItem("token"):"",O=a(3),j="/",m=["All","Favorites","Family","Work"],b="/hotels",_=a(14),p=a(1);var h=function(e){var t=e.children,a=e.className;return Object(p.jsxs)("div",{className:a,children:[Object(p.jsx)("header",{className:"header",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"header__wrapper",children:Object(p.jsx)("div",{className:"header__left",children:Object(p.jsx)("h2",{children:"Contacts"})})})})}),t]})},f=function(e,t){return function(a){return Object(p.jsx)(h,{className:t,children:Object(p.jsx)(e,Object(_.a)({},a))})}};f.displayName="withLayout";var v=f,E=a(21),N={CHANGE_CITY:"places/changeCity",LOAD_PLACES:"places/loadPlaces",LOAD_NEARBY_PLACES:"places/loadNearbyPlaces",REMOVE_NEARBY_PLACES:"places/removeNearbyPlaces",CHANGE_FAVORITE:"places/isFavorite",LOAD_COMMENTS:"comments/loadComments",REMOVE_COMMENTS:"comments/removeComments",CHANGE_LOGIN:"user/changeLogin",LOGOUT:"user/logout",CHANGE_LOADING_COMMENT_PROCESS_STATUS:"comment/changeLoadingCommentProcessStatus",SHOW_COMMENT_ERROR_MESSAGE:"comment/showErrorCommentFormMessage",SEND_COMMENT:"comment/sendComment",SEND_COMMENT_RATING:"comment/sendCommentRating",CHANGE_COMMENT_SENDED_SUCCESSFULLY_STATUS:"comment/changeCommentSendedSuccessfulyStatus",RESET_FAVORITES:"places/resetFavorites",REDIRECT_TO_ROUTE:"places/redirectToRoute"},C=(Object(i.b)(N.CHANGE_LOADING_COMMENT_PROCESS_STATUS,(function(e){return{payload:e}})),Object(i.b)(N.CHANGE_COMMENT_SENDED_SUCCESSFULLY_STATUS,(function(e){return{payload:e}})),Object(i.b)(N.SHOW_COMMENT_ERROR_MESSAGE,(function(e,t){return{payload:{isShowErrorMessage:e,errorMessageText:t}}})),Object(i.b)(N.CHANGE_CITY,(function(e){return{payload:e}}))),y=Object(i.b)(N.CHANGE_SORT_BY,(function(e){return{payload:e}})),g=Object(i.b)(N.LOAD_PLACES,(function(e){return{payload:e}})),x=Object(i.b)(N.LOAD_NEARBY_PLACES,(function(e){return{payload:e}})),S=Object(i.b)(N.REMOVE_NEARBY_PLACES),T=(Object(i.b)(N.LOAD_COMMENTS,(function(e){return{payload:e}})),Object(i.b)(N.REMOVE_COMMENTS),Object(i.b)(N.CHANGE_LOGIN,(function(e){return{payload:e}}))),A=Object(i.b)(N.CHANGE_FAVORITE,(function(e,t){return{payload:{id:e,newPlace:t}}})),R=(Object(i.b)(N.LOGOUT),Object(i.b)(N.RESET_FAVORITES,(function(e){return{payload:e}}))),L=(Object(i.b)(N.REDIRECT_TO_ROUTE,(function(e){return{payload:e}})),a(17)),M=a(10),P=a(36),F=a(32),I=a(33),D=a(34),G=a.n(D),k=function(){function e(){Object(F.a)(this,e)}return Object(I.a)(e,null,[{key:"adaptToClient",value:function(e){var t=Object.assign({},e,{host:Object.assign({},e.host,{avatarUrl:e.host.avatar_url,isPro:e.host.is_pro}),isFavorite:e.is_favorite,isPremium:e.is_premium,maxAdults:e.max_adults,previewImage:e.preview_image});return delete t.host.avatar_url,delete t.host.is_pro,delete t.is_favorite,delete t.is_premium,delete t.max_adults,delete t.preview_image,t}},{key:"adaptPlacesToClient",value:function(e){var t=this;return e.map((function(e){return t.adaptToClient(e)}))}},{key:"adaptCommentToClient",value:function(e){var t=Object.assign({},e,{comment:e.comment,date:e.date,id:e.id,rating:e.rating,user:Object.assign({},e.user,{avatarUrl:e.user.avatar_url,isPro:e.user.is_pro,id:e.user.id,name:e.user.name})});return delete t.user.avatar_url,delete t.user.is_pro,t}},{key:"getFavoritePlacesSeparatedByCity",value:function(e){var t=new Map;return e.forEach((function(e){e.isFavorite&&(t.has(e.city.name)||t.set(e.city.name,[]),t.get(e.city.name).push(e))})),t}},{key:"getFilteredPlaces",value:function(e,t){return t.filter((function(t){return t.city.name===e}))}},{key:"generateIdKeys",value:function(e){return new Array(e).fill("").map((function(){return G()(10)}))}},{key:"getUpdatedPlaces",value:function(e,t,a){var n=this.adaptToClient(a),c=Object(P.a)(t),s=c.findIndex((function(t){return t.id===e}));return c[s].isFavorite=n.isFavorite,c}},{key:"getNearbyPlacesFromCommonPlaces",value:function(e,t){var a=[];return e.forEach((function(e){var n=t.findIndex((function(t){return t.id===e.id}));a.push(t[n])})),a}},{key:"resetFavoriteStates",value:function(e){return e.map((function(e){return e=Object(_.a)(Object(_.a)({},e),{},{isFavorite:!1})}))}},{key:"getIsTokenExist",value:function(e){null!==localStorage.getItem("token")&&e(T(localStorage.getItem("login")))}}]),e}();k.formatDate=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"})};var U=k,w=Object(i.c)({places:[],isDataLoaded:!1,activeGroupName:"All"},(function(e){e.addCase(C,(function(e,t){e.activeGroupName=t.payload})).addCase(y,(function(e,t){e.sortBy=t.payload})).addCase(g,(function(e,t){e.places=t.payload,e.isDataLoaded=!0})).addCase(x,(function(e,t){e.nearbyPlaces=t.payload,e.isNearbyPlacesLoaded=!0})).addCase(S,(function(e){e.nearbyPlaces=[],e.isNearbyPlacesLoaded=!1})).addCase(A,(function(e,t){e.places=U.getUpdatedPlaces(t.payload.id,e.places,t.payload.newPlace)})).addCase(R,(function(e,t){e.places=U.resetFavoriteStates(t.payload)}))})),H="CONTACTS",B=Object(M.b)(Object(L.a)({},H,w)),Y=function(e){return e[H].places},V=function(e){return e[H].isDataLoaded},W=function(e){return e[H].activeGroupName};var J=function(e){var t=Object(o.c)(W),a=Object(o.b)(),n=function(e){e.preventDefault(),a(C(e.currentTarget.dataset.city))};return Object(p.jsx)("div",{className:"tabs",children:Object(p.jsx)("section",{className:"locations container",children:Object(p.jsx)("ul",{className:"locations__list tabs__list",children:m.map((function(e){return Object(p.jsx)("li",{className:"locations__item",children:Object(p.jsx)(E.a,{"data-city":e,className:"locations__item-link tabs__item ".concat(e===t&&"tabs__item--active"),to:"#",onClick:n,children:Object(p.jsx)("span",{children:e})})},e)}))})})})};var K=function(e){var t=e.activeGroupName;return Object(p.jsx)("div",{className:"cities",children:Object(p.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(p.jsx)("section",{className:"cities__no-places",children:Object(p.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(p.jsx)("b",{className:"cities__status",children:"No contacts available"}),Object(p.jsxs)("p",{className:"cities__status-description",children:['We could not find any contacts available at the moment in "',t,'" group']})]})}),Object(p.jsx)("div",{className:"cities__right-section"})]})})};var q=v((function(){var e=Object(o.c)(W),t=Object(o.c)(Y),a=U.getFilteredPlaces(e,t);return Object(p.jsxs)("main",{className:"page__main page__main--index",children:[Object(p.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(p.jsx)(J,{}),0===a.length?Object(p.jsx)(K,{activeGroupName:e}):Object(p.jsx)("div",{className:"cities",children:Object(p.jsx)("div",{className:"cities__places-container container",children:Object(p.jsxs)("section",{className:"cities__places places",children:[Object(p.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(p.jsxs)("b",{className:"places__found",children:[a.length," places to stay in ",e]})]})})})]})}));var z=v((function(){return Object(p.jsxs)("div",{style:{margin:"auto",width:"200px"},children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"404"}),Object(p.jsx)("h2",{children:"Page Not Found"})]})}));var Q=function(){return Object(p.jsx)("p",{children:"Loading..."})},X=a(5),Z=Object(X.a)();var $=function(){return Object(o.c)(V)?Object(p.jsx)(O.b,{history:Z,children:Object(p.jsxs)(O.c,{children:[Object(p.jsx)(O.a,{exact:!0,path:j,children:Object(p.jsx)(q,{className:"page page--gray page--index"})}),Object(p.jsx)(O.a,{children:Object(p.jsx)(z,{})})]})}):Object(p.jsx)(Q,{})},ee=function(e){return function(e){return function(t){return t.type===N.REDIRECT_TO_ROUTE&&Z.push(t.payload),e(t)}}},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,68)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))},ae=function(){var e=u.a.create({baseURL:"https://7.react.pages.academy/six-cities",timeout:5e3,headers:{"x-token":d}});return e.interceptors.response.use((function(e){return e}),(function(){})),e}(),ne=Object(i.a)({reducer:B,middleware:function(e){return e({thunk:{extraArgument:ae}}).concat(ee)}});U.getIsTokenExist(ne.dispatch),ne.dispatch((function(e,t,a){return a.get(b).then((function(t){var a=t.data,n=U.adaptPlacesToClient(a);e(g(n))})).catch((function(e){}))})),r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(o.a,{store:ne,children:Object(p.jsx)($,{})})}),document.getElementById("root")),te()}},[[67,1,2]]]);
//# sourceMappingURL=main.904efa5f.chunk.js.map